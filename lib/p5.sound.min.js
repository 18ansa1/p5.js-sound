!function(){var t;t=function(){"use strict";window.AudioContext=window.AudioContext||window.webkitAudioContext;var t=new window.AudioContext;p5.prototype.getAudioContext=function(){return t},"function"!=typeof t.createGain&&(window.audioContext.createGain=window.audioContext.createGainNode),"function"!=typeof t.createDelay&&(window.audioContext.createDelay=window.audioContext.createDelayNode),"function"!=typeof window.AudioBufferSourceNode.prototype.start&&(window.AudioBufferSourceNode.prototype.start=window.AudioBufferSourceNode.prototype.noteGrainOn),"function"!=typeof window.AudioBufferSourceNode.prototype.stop&&(window.AudioBufferSourceNode.prototype.stop=window.AudioBufferSourceNode.prototype.noteOff),"function"!=typeof window.OscillatorNode.prototype.start&&(window.OscillatorNode.prototype.start=window.OscillatorNode.prototype.noteOn),"function"!=typeof window.OscillatorNode.prototype.stop&&(window.OscillatorNode.prototype.stop=window.OscillatorNode.prototype.noteOff),window.AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(window.AudioContext.prototype.createScriptProcessor=window.AudioContext.prototype.createJavaScriptNode),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var e=document.createElement("audio");p5.prototype.isSupported=function(){return!!e.canPlayType},p5.prototype.isOGGSupported=function(){return!!e.canPlayType&&e.canPlayType('audio/ogg; codecs="vorbis"')},p5.prototype.isMP3Supported=function(){return!!e.canPlayType&&e.canPlayType("audio/mpeg;")},p5.prototype.isWAVSupported=function(){return!!e.canPlayType&&e.canPlayType('audio/wav; codecs="1"')},p5.prototype.isAACSupported=function(){return!!e.canPlayType&&(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;"))},p5.prototype.isAIFSupported=function(){return!!e.canPlayType&&e.canPlayType("audio/x-aiff;")},p5.prototype.isFileSupported=function(t){switch(t.toLowerCase()){case"mp3":return isMP3Supported();case"wav":return isWAVSupported();case"ogg":return isOGGSupported();case"mp4":return isAACSupported();case"aiff":return isAIFSupported();default:return!1}}}();var o;o=function(){"use strict";var t=function(){var t=p5.prototype.getAudioContext();this.input=t.createGain(),this.output=t.createGain(),this.limiter=t.createDynamicsCompressor(),this.limiter.threshold.value=0,this.limiter.ratio.value=100,this.audiocontext=t,this.output.disconnect(this.audiocontext.destination),this.inputSources=[],this.input.connect(this.limiter),this.limiter.connect(this.output),this.meter=t.createGain(),this.output.connect(this.meter),this.output.connect(this.audiocontext.destination),this.soundArray=[]},e=new t;return e}(t);var i;i=function(){"use strict";var t=o;p5.prototype.masterVolume=function(e){t.output.gain.value=e},p5.prototype.sampleRate=function(){return t.audiocontext.sampleRate},p5.prototype.getMasterVolume=function(){return t.output.gain.value},p5.prototype.freqToMidi=function(t){var e=Math.log(t/440)/Math.log(2),o=Math.round(12*e)+57;return o},p5.prototype.midiToFreq=function(t){return 440*Math.pow(2,(t-69)/12)},p5.prototype._registerRemoveFunc("disposeSound"),p5.prototype.disposeSound=function(){for(var e=0;e<t.soundArray.length;e++)console.log(t.soundArray[e]),t.soundArray[e].dispose(),console.log(t.soundArray[e])}}(o);var s;s=function(){"use strict";var t=o;p5.prototype.SoundFile=function(e,o){var i;if("string"==typeof e)i=e;else if("object"==typeof e)for(var s=0;s<e.length;s++){var n=e[s].split(".").pop(),r=p5.prototype.isFileSupported(n);if(r){console.log("."+n+" is "+r+" supported by your browser."),i=e[s];break}}this.p5s=t,this.url=i,this.sources=[],this.source=null,this.buffer=null,this.playbackRate=1,this.gain=1,this.input=this.p5s.audiocontext.createGain(),this.output=this.p5s.audiocontext.createGain(),this.reversed=!1,this.startTime=0,this.endTime=null,this.playing=!1,this.paused=null,this.mode="sustain",this.startMillis=null,this.panPosition=0,this.panner=this.p5s.audiocontext.createPanner(),this.panner.panningModel="equalpower",this.panner.distanceModel="linear",this.panner.setPosition(0,0,0),this.output.connect(this.panner),this.panner.connect(this.p5s.input),this.load(o),this.p5s.soundArray.push(this)},p5.prototype.SoundFile.prototype.load=function(t){if(this.buffer)t&&t(this);else{var e=new XMLHttpRequest;e.open("GET",this.url,!0),e.responseType="arraybuffer";var o=this;e.onload=function(){var i=p5.prototype.getAudioContext();i.decodeAudioData(e.response,function(e){o.buffer=e,t&&t(o)})},e.send()}},p5.prototype.SoundFile.prototype.isLoaded=function(){return this.buffer?!0:!1},p5.prototype.SoundFile.prototype.play=function(t,e,o,i){if(!this.buffer)throw"not ready to play file, buffer has yet to load. Try preload()";if("restart"===this.mode&&this.buffer&&this.source&&this.source.stop(),o){if(!(o>=0&&o<this.buffer.duration))throw"start time out of range";this.startTime=o}if(i){if(!(i>=0&&i<=this.buffer.duration))throw"end time out of range";this.endTime=i}else this.endTime=this.buffer.duration;this.source=this.p5s.audiocontext.createBufferSource(),this.source.buffer=this.buffer,this.source.loop=this.looping,this.source.loop===!0&&(this.source.loopStart=this.startTime,this.source.loopEnd=this.endTime),this.source.onended=function(){this.playing&&(this.playing=!this.playing,this.stop())},this.source.gain?(this.source.gain.value=e||1,this.source.connect(this.output)):(this.source.gain=this.p5s.audiocontext.createGain(),this.source.connect(this.source.gain),this.source.gain.gain.value=e||1,this.source.gain.connect(this.output)),this.source.playbackRate.value=t||Math.abs(this.playbackRate),this.paused?(this.source.start(0,this.pauseTime,this.endTime),this.unpaused=!0):(this.unpaused=!1,this.source.start(0,this.startTime,this.endTime)),this.startSeconds=this.p5s.audiocontext.currentTime,this.playing=!0,this.paused=!1,this.sources.push(this.source)},p5.prototype.SoundFile.prototype.playMode=function(t){var e=t.toLowerCase();if("restart"===e&&this.buffer&&this.source)for(var o=0;o<this.sources.length-1;o++)this.sources[o].stop();if("restart"!==e&&"sustain"!==e)throw'Invalid play mode. Must be either "restart" or "sustain"';this.mode=e},p5.prototype.SoundFile.prototype.pause=function(){var t=this.looping;if(this.isPlaying()&&this.buffer&&this.source)this.pauseTime=this.currentTime(),this.source.stop(),this.paused=!0;else{var e=this.startTime;this.startTime=this.pauseTime,this.play(),this.looping=t,this.startTime=e}},p5.prototype.SoundFile.prototype.loop=function(t,e,o,i){this.looping=!0,this.play(t,e,o,i)},p5.prototype.SoundFile.prototype.setLoop=function(t){if(t===!0)this.looping=!0;else{if(t!==!1)throw"Error: setLoop accepts either true or false";this.looping=!1}this.source&&(this.source.loop=this.looping)},p5.prototype.SoundFile.prototype.isLooping=function(){return this.source&&this.looping===!0&&this.isPlaying()===!0?!0:!1},p5.prototype.SoundFile.prototype.isPlaying=function(){return this.source&&(2===this.source.playbackState&&(this.playing=!0),3===this.source.playbackState&&(this.playing=!1)),this.playing},p5.prototype.SoundFile.prototype.isPaused=function(){return this.paused?this.paused:!1},p5.prototype.SoundFile.prototype.stop=function(){this.buffer&&this.source&&(this.source.stop(),this.pauseTime=0,this.playing=!1)},p5.prototype.SoundFile.prototype.stopAll=function(){if(this.buffer&&this.source){for(var t=0;t<this.sources.length-1;t++)null!==this.sources[t]&&this.sources[t].stop();this.playing=!1}},p5.prototype.SoundFile.prototype.rate=function(t){this.playbackRate!==t&&(this.playbackRate=t,0===t&&this.playing&&this.pause(),0>t&&!this.reversed?this.reverseBuffer():t>0&&this.reversed&&this.reverseBuffer(),this.isPlaying()===!0&&(this.pause(),this.play()))},p5.prototype.SoundFile.prototype.getPlaybackRate=function(){return this.playbackRate},p5.prototype.SoundFile.prototype.channels=function(){return this.buffer.numberOfChannels},p5.prototype.SoundFile.prototype.sampleRate=function(){return this.buffer.sampleRate},p5.prototype.SoundFile.prototype.frames=function(){return this.buffer.length},p5.prototype.SoundFile.prototype.duration=function(){return this.buffer?this.buffer.duration:0},p5.prototype.SoundFile.prototype.currentTime=function(){var t;return this.isPlaying()&&!this.unpaused?t=(this.p5s.audiocontext.currentTime-this.startSeconds+this.startTime)*this.source.playbackRate.value%this.duration():this.isPlaying()&&this.unpaused?t=(this.pauseTime+(this.p5s.audiocontext.currentTime-this.startSeconds)*this.source.playbackRate.value)%this.duration():this.paused?this.pauseTime:this.startTime},p5.prototype.SoundFile.prototype.jump=function(t,e){if(0>t||t>this.buffer.duration)throw"jump time out of range";if(t>e||e>this.buffer.duration)throw"end time out of range";this.startTime=t||0,this.endTime=e?e:this.buffer.duration,this.isPlaying()&&(this.stop(),this.play(t,this.endTime))},p5.prototype.SoundFile.prototype.getPeaks=function(t){if(!this.buffer)throw"Cannot load peaks yet, buffer is not loaded";if(t||(t=5*window.width),this.buffer){for(var e=this.buffer,o=e.length/t,i=~~(o/10)||1,s=e.numberOfChannels,n=new Float32Array(t),r=0;s>r;r++)for(var p=e.getChannelData(r),a=0;t>a;a++){for(var u=~~(a*o),c=~~(u+o),h=0,l=u;c>l;l+=i){var d=p[l];d>h?h=d:-d>h&&(h=d)}(0===r||h>n[a])&&(n[a]=h)}return n}},p5.prototype.SoundFile.prototype.reverseBuffer=function(){if(!this.buffer)throw"SoundFile is not done loading";Array.prototype.reverse.call(this.buffer.getChannelData(0)),Array.prototype.reverse.call(this.buffer.getChannelData(1)),this.reversed=!this.reversed},p5.prototype.SoundFile.prototype._onEnded=function(t){t.onended=function(t){console.log(t),t.stop()}},p5.prototype.SoundFile.prototype.setVolume=function(t,e){if(e){var o=e||0,i=this.output.gain.value;this.output.gain.cancelScheduledValues(this.p5s.audiocontext.currentTime),this.output.gain.setValueAtTime(i,this.p5s.audiocontext.currentTime),this.output.gain.linearRampToValueAtTime(t,o+this.p5s.audiocontext.currentTime)}else this.output.gain.cancelScheduledValues(this.p5s.audiocontext.currentTime),this.output.gain.setValueAtTime(t,this.p5s.audiocontext.currentTime)},p5.prototype.SoundFile.prototype.add=function(){},p5.prototype.SoundFile.prototype.dispose=function(){if(this.buffer&&this.source)for(var t=0;t<this.sources.length-1;t++)null!==this.sources[t]&&(this.sources[t].stop(),this.sources[t]=null);null!==this.output&&(this.output.disconnect(),this.output=null),null!==this.panner&&(this.panner.disconnect(),this.panner=null)},p5.prototype.SoundFile.prototype.pan=function(t){this.panPosition=t,t=90*t;var e=parseInt(t),o=e+90;o>90&&(o=180-o);var i=Math.sin(e*(Math.PI/180)),s=Math.sin(o*(Math.PI/180));this.panner.setPosition(i,0,s)},p5.prototype.SoundFile.prototype.getPan=function(){return this.panPosition},p5.prototype.SoundFile.prototype.connect=function(t){t?this.buffer&&this.source&&this.panner.connect(t.hasOwnProperty("input")?t.input:t):this.panner.connect(this.p5s.input)},p5.prototype.SoundFile.prototype.disconnect=function(t){this.panner.disconnect(t)},p5.prototype._registerPreloadFunc("loadSound"),p5.prototype.loadSound=function(t,e){var o=new p5.prototype.SoundFile(t,e);return o},p5.prototype.soundFormats=function(){}}(t,o);var n;n=function(){"use strict";var t=o;p5.prototype.Amplitude=function(e){this.p5s=t,this.bufferSize=2048,this.audiocontext=this.p5s.audiocontext,this.processor=this.audiocontext.createScriptProcessor(this.bufferSize),this.input=this.processor,this.output=this.audiocontext.createGain(),this.smoothing=e||0,this.volume=0,this.average=0,this.volMax=.001,this.normalize=!1,this.processor.onaudioprocess=this.volumeAudioProcess.bind(this),this.processor.connect(this.output),this.output.gain.value=0,this.output.connect(this.audiocontext.destination),this.p5s.meter.connect(this.processor)},p5.prototype.Amplitude.prototype.setInput=function(t,e){this.p5s.meter.disconnect(this.processor),e&&(this.smoothing=e),null==t?(console.log("Amplitude input source is not ready! Connecting to master output instead"),this.p5s.meter.connect(this.processor)):t?(t.connect(this.processor),this.processor.disconnect(),this.processor.connect(this.output),console.log("source connected")):this.p5s.meter.connect(this.processor)},p5.prototype.Amplitude.prototype.connect=function(t){this.output.connect(t?t.hasOwnProperty("input")?t.input:t:this.panner.connect(this.p5s.input))},p5.prototype.Amplitude.prototype.volumeAudioProcess=function(t){for(var e,o=t.inputBuffer.getChannelData(0),i=o.length,s=0,n=0,r=0;i>r;r++)e=o[r],this.normalize?(s+=constrain(e/this.volMax,-1,1),n+=constrain(e/this.volMax,-1,1)*constrain(e/this.volMax,-1,1)):(s+=e,n+=e*e);var p=Math.sqrt(n/i);this.volume=Math.max(p,this.volume*this.smoothing),this.volMax=Math.max(this.volume,this.volMax),this.volNorm=constrain(this.volume/this.volMax,0,1)},p5.prototype.Amplitude.prototype.getLevel=function(){return this.normalize?this.volNorm:this.volume},p5.prototype.Amplitude.prototype.toggleNormalize=function(t){this.normalize="boolean"==typeof t?t:!this.normalize},p5.prototype.Amplitude.prototype.smooth=function(t){t>=0&&1>t?this.smoothing=t:console.log("Error: smoothing must be between 0 and 1")}}(o);var r;r=function(){"use strict";var t=o;p5.prototype.FFT=function(e,o,i,s){var n=e||.6,r=o||1024;this.p5s=t,this.analyser=this.p5s.audiocontext.createAnalyser(),this.p5s.output.connect(this.analyser),this.analyser.maxDecibels=s||0,this.analyser.minDecibels=i||-140,this.analyser.smoothingTimeConstant=n,this.analyser.fftSize=r,this.freqDomain=new Uint8Array(this.analyser.frequencyBinCount),this.timeDomain=new Uint8Array(this.analyser.frequencyBinCount)},p5.prototype.FFT.prototype.setInput=function(t){t.connect(this.analyser),this.analyser.disconnect()},p5.prototype.FFT.prototype.processFreq=function(){return this.analyser.getByteFrequencyData(this.freqDomain),this.freqDomain},p5.prototype.FFT.prototype.waveform=function(){return this.analyser.getByteTimeDomainData(this.timeDomain),this.timeDomain},p5.prototype.FFT.prototype.setSmoothing=function(t){this.analyser.smoothingTimeConstant=t},p5.prototype.FFT.prototype.getSmoothing=function(){return this.analyser.smoothingTimeConstant},p5.prototype.FFT.prototype.getFreq=function(t,e){var o=this.p5s.audiocontext.sampleRate/2;if("number"!=typeof t)return null;if(e){if(t&&e){if(t>e){var i=e;e=t,t=i}for(var s=Math.round(t/o*this.freqDomain.length),n=Math.round(e/o*this.freqDomain.length),r=0,p=0,a=s;n>=a;a++)r+=this.freqDomain[a],p+=1;var u=r/p;return u}throw"invalid input for getFreq()"}var c=Math.round(t/o*this.freqDomain.length);return this.freqDomain[c]}}(o);var p;p=function(){"use strict";var t=o;p5.prototype.Oscillator=function(e,o){this.started=!1,this.p5s=t,this.oscillator=this.p5s.audiocontext.createOscillator(),this.f=e||440,this.oscillator.frequency.value=this.f,this.oscillator.type=o||"sine";this.oscillator;this.input=this.p5s.audiocontext.createGain(),this.output=this.p5s.audiocontext.createGain(),this.ampNode=this.output.gain,this.freqNode=this.oscillator.frequency,this.output.gain.value=.5,this.panPosition=0,this.panner=this.p5s.audiocontext.createPanner(),this.panner.panningModel="equalpower",this.panner.distanceModel="linear",this.panner.setPosition(0,0,0),this.oscillator.connect(this.output),this.output.connect(this.panner),this.panner.connect(this.p5s.input),this.p5s.soundArray.push(this)},p5.prototype.Oscillator.prototype.start=function(t,e){if(this.started&&this.stop(),!this.started){var o=t||this.f,i=this.oscillator.type;this.oscillator=this.p5s.audiocontext.createOscillator(),this.oscillator.frequency.exponentialRampToValueAtTime(Math.abs(o),this.p5s.audiocontext.currentTime),this.oscillator.type=i,this.oscillator.connect(this.output),this.started=!0,e=e||this.p5s.audiocontext.currentTime,this.oscillator.start(e),this.freqNode=this.oscillator.frequency,void 0!==this.mods&&void 0!==this.mods.frequency&&this.mods.frequency.connect(this.freqNode)}},p5.prototype.Oscillator.prototype.stop=function(t){if(this.started){var e=t||this.p5s.audiocontext.currentTime;this.oscillator.stop(e),this.started=!1}},p5.prototype.Oscillator.prototype.amp=function(t,e){if(e){var o=e||0,i=this.output.gain.value;this.output.gain.cancelScheduledValues(this.p5s.audiocontext.currentTime),this.output.gain.setValueAtTime(i,this.p5s.audiocontext.currentTime),this.output.gain.linearRampToValueAtTime(t,o+this.p5s.audiocontext.currentTime)}else this.output.gain.cancelScheduledValues(this.p5s.audiocontext.currentTime),this.output.gain.setValueAtTime(t,this.p5s.audiocontext.currentTime)},p5.prototype.Oscillator.prototype.getAmp=function(){return this.output.gain.value},p5.prototype.Oscillator.prototype.freq=function(t,e){if(this.f=t,e){var o=e||0,i=this.oscillator.frequency.value;this.oscillator.frequency.cancelScheduledValues(this.p5s.audiocontext.currentTime),this.oscillator.frequency.setValueAtTime(i,this.p5s.audiocontext.currentTime),this.oscillator.frequency.exponentialRampToValueAtTime(t,o+this.p5s.audiocontext.currentTime)}else this.oscillator.frequency.cancelScheduledValues(this.p5s.audiocontext.currentTime),this.oscillator.frequency.setValueAtTime(t,this.p5s.audiocontext.currentTime)},p5.prototype.Oscillator.prototype.getFreq=function(){return this.oscillator.frequency.value},p5.prototype.Oscillator.prototype.setType=function(t){this.oscillator.type=t},p5.prototype.Oscillator.prototype.getType=function(){return this.oscillator.type},p5.prototype.Oscillator.prototype.connect=function(t){this.panner.connect(t?t.hasOwnProperty("input")?t.input:t:this.p5s.input)},p5.prototype.Oscillator.prototype.disconnect=function(t){this.panner.disconnect(t)},p5.prototype.Oscillator.prototype.pan=function(t){t||(t=0),this.panPosition=t,t=90*t;var e=parseInt(t),o=e+90;o>90&&(o=180-o);var i=Math.sin(e*(Math.PI/180)),s=Math.sin(o*(Math.PI/180));this.panner.setPosition(i,0,s)},p5.prototype.Oscillator.prototype.getPan=function(){return this.panPosition},p5.prototype.Oscillator.prototype.dispose=function(){this.oscillator&&(this.stop(),this.disconnect(),this.oscillator.disconnect(),this.panner=null,this.oscillator=null),this.osc2&&this.osc2.dispose()},p5.prototype.Oscillator.prototype.mod=function(t){t.cancelScheduledValues(this.p5s.audiocontext.currentTime),this.output.connect(t)},p5.prototype.SinOsc=function(t){p5.prototype.Oscillator.call(this,t,"sine")},p5.prototype.SinOsc.prototype=Object.create(p5.prototype.Oscillator.prototype),p5.prototype.TriOsc=function(t){p5.prototype.Oscillator.call(this,t,"triangle")},p5.prototype.TriOsc.prototype=Object.create(p5.prototype.Oscillator.prototype),p5.prototype.SawOsc=function(t){p5.prototype.Oscillator.call(this,t,"sawtooth")},p5.prototype.SawOsc.prototype=Object.create(p5.prototype.Oscillator.prototype),p5.prototype.SqrOsc=function(t){p5.prototype.Oscillator.call(this,t,"square")},p5.prototype.SqrOsc.prototype=Object.create(p5.prototype.Oscillator.prototype)}(o);var a;a=function(){"use strict";p5.prototype.Pulse=function(t,e){p5.prototype.Oscillator.call(this,t,"sawtooth"),this.w=e||0,this.osc2=new SawOsc(t),this.dNode=this.p5s.audiocontext.createDelay(),this.dNode.delayTime.value=map(this.w,0,1,0,1/this.oscillator.frequency.value),this.osc2.disconnect(),this.osc2.panner.connect(this.dNode),this.dNode.connect(this.output)},p5.prototype.Pulse.prototype=Object.create(p5.prototype.Oscillator.prototype),p5.prototype.Pulse.prototype.width=function(t){1>=t&&t>=0&&(this.w=t,this.dNode.delayTime.value=map(this.w,0,1,0,1/this.oscillator.frequency.value))},p5.prototype.Pulse.prototype.start=function(t,e){if(this.started&&this.stop(),!this.started){var o=t||this.f,i=this.oscillator.type;this.oscillator=this.p5s.audiocontext.createOscillator(),this.oscillator.frequency.exponentialRampToValueAtTime(o,this.p5s.audiocontext.currentTime),this.oscillator.type=i,this.oscillator.connect(this.output),this.started=!0,e=e+this.p5s.audiocontext.currentTime||this.p5s.audiocontext.currentTime,this.oscillator.start(e),this.osc2.oscillator=this.p5s.audiocontext.createOscillator(),this.osc2.oscillator.frequency.value=o,this.osc2.oscillator.frequency.exponentialRampToValueAtTime(o,this.p5s.audiocontext.currentTime),this.osc2.oscillator.type=i,this.osc2.start(e),this.freqNode=[this.oscillator.frequency,this.osc2.oscillator.frequency],void 0!==this.mods&&void 0!==this.mods.frequency&&(this.mods.frequency.connect(this.freqNode[0]),this.mods.frequency.connect(this.freqNode[1]))}},p5.prototype.Pulse.prototype.stop=function(t){if(this.started){var e=t+this.p5s.audiocontext.currentTime,o=e||this.p5s.audiocontext.currentTime;this.oscillator.stop(o),this.osc2.stop(o),this.started=!1}},p5.prototype.Pulse.prototype.freq=function(t,e){var o=e||0;this.oscillator.frequency.cancelScheduledValues(this.p5s.audiocontext.currentTime),this.osc2.oscillator.frequency.cancelScheduledValues(this.p5s.audiocontext.currentTime),this.oscillator.frequency.exponentialRampToValueAtTime(t,o+this.p5s.audiocontext.currentTime),this.osc2.oscillator.frequency.exponentialRampToValueAtTime(t,o+this.p5s.audiocontext.currentTime)}}(o,p);var u;u=function(){"use strict";var t=o;p5.prototype.LFO=function(e,o){this.started=!1,this.p5s=t,this.input=this.p5s.audiocontext.createGain(),this.output=this.p5s.audiocontext.createGain(),this.oscillator||(this.oscillator=this.p5s.audiocontext.createOscillator(),this.oscillator.frequency.value=e||1,this.f=this.oscillator.frequency.value,this.oscillator.type=o||"sine"),this.output.gain.value=1,this.oscillator.connect(this.output)},p5.prototype.LFO.prototype=Object.create(p5.prototype.Oscillator.prototype),p5.prototype.LFO.prototype.freqMod=function(t){t.oscillator.frequency.cancelScheduledValues(this.p5s.audiocontext.currentTime),this.output.connect(t.oscillator.frequency),t.oscillator.osc2&&this.output.connect(t.osc2.oscillator.frequency),t.mods||(t.mods={}),t.mods.frequency=this.output,void 0===this.connections&&(this.connections=[]),this.connections.push(t.mods.frequency)},p5.prototype.LFO.prototype.ampMod=function(t){t.output.gain.cancelScheduledValues(this.p5s.audiocontext.currentTime),this.output.connect(t.output.gain)},p5.prototype.LFO.prototype.disconnect=function(t){this.output.disconnect(t);for(var e=0;e<this.connections.length;e++)this.connections[e]=null},p5.prototype.LFO.prototype.freq=function(t,e){this.f=t;var o=e||0;this.oscillator.frequency.cancelScheduledValues(this.p5s.audiocontext.currentTime),this.oscillator.frequency.exponentialRampToValueAtTime(t,o+this.p5s.audiocontext.currentTime)}}(o,p);var c;c=function(){"use strict";var t=o;p5.prototype.Noise=function(){this.started=!1,this.buffer=e,this.output=t.audiocontext.createGain(),this.output.gain.value=.5,this.panPosition=0,this.panner=t.audiocontext.createPanner(),this.panner.panningModel="equalpower",this.panner.distanceModel="linear",this.panner.setPosition(0,0,0),this.output.connect(this.panner),t.soundArray.push(this)};var e=function(){for(var e=2*t.audiocontext.sampleRate,o=t.audiocontext.createBuffer(1,e,t.audiocontext.sampleRate),i=o.getChannelData(0),s=0;e>s;s++)i[s]=2*Math.random()-1;return o}(),i=function(){var e,o,i,s,n,r,p,a=2*t.audiocontext.sampleRate,u=t.audiocontext.createBuffer(1,a,t.audiocontext.sampleRate),c=u.getChannelData(0);e=o=i=s=n=r=p=0;for(var h=0;a>h;h++){var l=2*Math.random()-1;e=.99886*e+.0555179*l,o=.99332*o+.0750759*l,i=.969*i+.153852*l,s=.8665*s+.3104856*l,n=.55*n+.5329522*l,r=-.7616*r-.016898*l,c[h]=e+o+i+s+n+r+p+.5362*l,c[h]*=.11,p=.115926*l}return u}(),s=function(){for(var e=2*t.audiocontext.sampleRate,o=t.audiocontext.createBuffer(1,e,t.audiocontext.sampleRate),i=o.getChannelData(0),s=0,n=0;e>n;n++){var r=2*Math.random()-1;i[n]=(s+.02*r)/1.02,s=i[n],i[n]*=3.5}return o}();p5.prototype.Noise.prototype.connect=function(e){this.panner.connect(e?e.hasOwnProperty("input")?e.input:e:t.input)},p5.prototype.Noise.prototype.disconnect=function(){this.output.disconnect(),this.panner.disconnect(),this.output.connect(this.panner)},p5.prototype.Noise.prototype.ampMod=function(e){e.output.gain.cancelScheduledValues(t.audiocontext.currentTime),this.output.connect(e.output.gain)},p5.prototype.Noise.prototype.start=function(){this.started&&this.stop(),this.noise=t.audiocontext.createBufferSource(),this.noise.buffer=this.buffer,this.noise.loop=!0,this.noise.connect(this.output),console.log(this.output),this.noise.start(),this.started=!0},p5.prototype.Noise.prototype.setType=function(t){switch(t){case"white":this.buffer=e;break;case"pink":this.buffer=i;break;case"brown":this.buffer=s;break;default:this.buffer=e}this.started&&(this.stop(),this.start())},p5.prototype.Noise.prototype.stop=function(){this.noise.stop(),this.started=!1},p5.prototype.Noise.prototype.pan=function(t){this.panPosition=t,t=90*t;var e=parseInt(t),o=e+90;o>90&&(o=180-o);var i=Math.sin(e*(Math.PI/180)),s=Math.sin(o*(Math.PI/180));this.panner.setPosition(i,0,s)},p5.prototype.Noise.prototype.amp=function(e,o){if(o){var i=o||0,s=this.output.gain.value;this.output.gain.cancelScheduledValues(t.audiocontext.currentTime),this.output.gain.setValueAtTime(s,t.audiocontext.currentTime),this.output.gain.linearRampToValueAtTime(e,i+t.audiocontext.currentTime)}else this.output.gain.cancelScheduledValues(t.audiocontext.currentTime),this.output.gain.setValueAtTime(e,t.audiocontext.currentTime)},p5.prototype.Noise.prototype.dispose=function(){this.stop(),this.output.disconnect(),this.panner.disconnect(),this.output=null,this.panner=null,this.buffer=null,this.noise.disconnect(),this.noise=null}}(o);var h;h=function(){"use strict";var t=o;p5.prototype.AudioIn=function(){this.p5s=t,this.input=this.p5s.audiocontext.createGain(),this.output=this.p5s.audiocontext.createGain(),this.stream=null,this.mediaStream=null,this.currentSource=0,this.amplitude=new Amplitude,this.output.connect(this.amplitude.input),"undefined"==typeof window.MediaStreamTrack?window.alert("This browser does not support MediaStreamTrack"):"undefined"!=typeof window.MediaStreamTrack.getSources&&window.MediaStreamTrack.getSources(this._gotSources),this.p5s.soundArray.push(this)},p5.prototype.AudioIn.prototype.connect=function(t){this.output.connect(t?t.hasOwnProperty("input")?t.input:t:this.p5s.input)},p5.prototype.AudioIn.prototype.listSources=function(){return console.log("input sources: "),console.log(t.inputSources),t.inputSources.length>0?t.inputSources:"This browser does not support MediaStreamTrack.getSources()"},p5.prototype.AudioIn.prototype.setSource=function(e){var o=this;t.inputSources.length>0&&e<t.inputSources.length?(o.currentSource=e,console.log("set source to "+t.inputSources[o.currentSource].id)):console.log("unable to set input source")},p5.prototype.AudioIn.prototype.disconnect=function(t){this.output.disconnect(t),this.output.connect(this.amplitude.input)},p5.prototype.AudioIn.prototype.getLevel=function(t){return t&&(this.amplitude.smoothing=t),this.amplitude.getLevel()},p5.prototype.AudioIn.prototype.on=function(){var o=this;if(t.inputSources[o.currentSource]){var i=t.inputSources[o.currentSource].id,s={audio:{optional:[{sourceId:i}]}};navigator.getUserMedia(s,this._onStream=function(t){o.stream=t,o.mediaStream=o.p5s.audiocontext.createMediaStreamSource(t),o.mediaStream.connect(o.output),o.amplitude.setInput(o.output)},this._onStreamError=function(){console.error(e)})}else window.navigator.getUserMedia({audio:!0},this._onStream=function(t){o.stream=t,o.mediaStream=o.p5s.audiocontext.createMediaStreamSource(t),o.mediaStream.connect(o.output),o.amplitude.setInput(o.output)},this._onStreamError=function(){console.error(e)})},p5.prototype.AudioIn.prototype.off=function(){this.stream&&this.stream.stop()},p5.prototype.AudioIn.prototype._gotSources=function(e){for(var o=0;o!==e.length;o++){var i=e[o];"audio"===i.kind&&t.inputSources.push(i)}},p5.prototype.AudioIn.prototype.amp=function(t,e){if(e){var o=e||0,i=this.output.gain.value;this.output.gain.cancelScheduledValues(this.p5s.audiocontext.currentTime),this.output.gain.setValueAtTime(i,this.p5s.audiocontext.currentTime),this.output.gain.linearRampToValueAtTime(t,o+this.p5s.audiocontext.currentTime)}else this.output.gain.cancelScheduledValues(this.p5s.audiocontext.currentTime),this.output.gain.setValueAtTime(t,this.p5s.audiocontext.currentTime)},p5.prototype.AudioIn.prototype.dispose=function(){this.off(),this.output.disconnect(),this.amplitude.disconnect(),this.amplitude=null,this.output=null}}(o);var l;l=function(){"use strict";var t=o;p5.prototype.Env=function(t,e,o,i,s,n,r){this.attackTime=t,this.attackLevel=e,this.decayTime=o||0,this.sustainTime=s||0,this.sustainLevel=i||0,this.releaseTime=n||0,this.releaseLevel=r||0},p5.prototype.Env.prototype.play=function(e){void 0!==e.output&&(e=e.output.gain);var o=t.audiocontext.currentTime;e.cancelScheduledValues(o),e.setValueAtTime(0,o),e.linearRampToValueAtTime(this.attackLevel,o+this.attackTime),e.linearRampToValueAtTime(this.sustainLevel,o+this.attackTime+this.decayTime),e.setValueAtTime(this.sustainLevel,o+this.attackTime+this.decayTime+this.sustainTime),e.linearRampToValueAtTime(this.releaseLevel,o+this.attackTime+this.decayTime+this.sustainTime+this.releaseTime)},p5.prototype.Env.prototype.stop=function(e){void 0!==e.output&&(e=e.output.gain),e.cancelScheduledValues(t.audiocontext.currentTime),e.setValueAtTime(0,t.audiocontext.currentTime)}}(o);var d;d=function(){"use strict";var e=t;return e}(t,o,i,s,n,r,p,a,u,c,h,l)}();